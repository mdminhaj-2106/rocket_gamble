<% layout('layouts/main') -%>

<div class="container-fluid vh-100 d-flex align-items-center justify-content-center">
  <div class="row w-100">
    <div class="col-md-6 col-lg-4 mx-auto">
      <div class="card card-glass text-center fade-in">
        <div class="card-body p-5">
          <!-- Logo/Title -->
          <div class="mb-4">
            <div class="rocket-loader mb-3">
              <i class="fas fa-rocket fa-4x text-gradient"></i>
            </div>
            <h1 class="font-orbitron text-gradient mb-2">ROCKET BETTING</h1>
            <p class="text-light mb-0">Enter the Ultimate Gaming Arena</p>
          </div>

          <!-- Login Form -->
          <form action="/auth/login" method="POST" id="loginForm">
            <div class="mb-4">
              <label for="name" class="form-label">
                <i class="fas fa-user me-2"></i>Enter Your Name
              </label>
              <input 
                type="text" 
                class="form-control form-control-lg text-center" 
                id="name" 
                name="name" 
                placeholder="Your gaming name"
                required 
                maxlength="50"
                pattern="[a-zA-Z0-9\s]+"
                title="Only letters, numbers, and spaces allowed"
              >
            </div>

            <% if (error) { %>
              <div class="alert alert-danger mb-4" role="alert">
                <i class="fas fa-exclamation-triangle me-2"></i>
                <%= error %>
              </div>
            <% } %>

            <button type="submit" class="btn btn-gradient btn-lg w-100 mb-4">
              <i class="fas fa-rocket me-2"></i>
              Launch Game
            </button>
          </form>

          <!-- Game Info -->
          <div class="row text-center mt-4">
            <div class="col-4">
              <div class="p-3">
                <i class="fas fa-coins fa-2x text-warning mb-2"></i>
                <p class="small text-light mb-0">1000 Starting Credits</p>
              </div>
            </div>
            <div class="col-4">
              <div class="p-3">
                <i class="fas fa-trophy fa-2x text-success mb-2"></i>
                <p class="small text-light mb-0">3 Epic Rounds</p>
              </div>
            </div>
            <div class="col-4">
              <div class="p-3">
                <i class="fas fa-users fa-2x text-info mb-2"></i>
                <p class="small text-light mb-0">Multiplayer Action</p>
              </div>
            </div>
          </div>

          <!-- Rules Preview -->
          <div class="mt-4 text-start">
            <h6 class="text-gradient mb-3">
              <i class="fas fa-info-circle me-2"></i>Quick Rules
            </h6>
            <ul class="list-unstyled text-light small">
              <li class="mb-2">
                <i class="fas fa-check text-success me-2"></i>
                One player per device/IP
              </li>
              <li class="mb-2">
                <i class="fas fa-check text-success me-2"></i>
                Winners split the losing pot
              </li>
              <li class="mb-2">
                <i class="fas fa-check text-success me-2"></i>
                3 rounds of epic betting action
              </li>
              <li class="mb-2">
                <i class="fas fa-check text-success me-2"></i>
                Real-time leaderboard updates
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Additional Info Cards -->
      <div class="row mt-4">
        <div class="col-6">
          <div class="card card-glass text-center">
            <div class="card-body p-3">
              <i class="fas fa-rocket fa-2x text-primary mb-2"></i>
              <h6 class="text-light">Round 1</h6>
              <small class="text-muted">Rocket Distance</small>
            </div>
          </div>
        </div>
        <div class="col-6">
          <div class="card card-glass text-center">
            <div class="card-body p-3">
              <i class="fas fa-bullseye fa-2x text-warning mb-2"></i>
              <h6 class="text-light">Round 2</h6>
              <small class="text-muted">Range Prediction</small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Floating Background Elements -->
<div class="floating-elements">
  <div class="floating-rocket" style="top: 20%; left: 10%; animation-delay: 0s;">
    <i class="fas fa-rocket fa-2x text-white-50"></i>
  </div>
  <div class="floating-rocket" style="top: 60%; right: 15%; animation-delay: 2s;">
    <i class="fas fa-rocket fa-3x text-white-50"></i>
  </div>
  <div class="floating-rocket" style="top: 80%; left: 70%; animation-delay: 4s;">
    <i class="fas fa-rocket fa-2x text-white-50"></i>
  </div>
</div>

<style>
.floating-elements {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: -1;
}

.floating-rocket {
  position: absolute;
  animation: float 6s ease-in-out infinite;
  opacity: 0.1;
}

@keyframes float {
  0%, 100% { 
    transform: translateY(0px) rotate(0deg); 
  }
  50% { 
    transform: translateY(-20px) rotate(-10deg); 
  }
}

.card-glass {
  animation: slideInUp 0.8s ease-out;
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(50px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Form validation styles */
.form-control:valid {
  border-color: #28a745;
}

.form-control:invalid:not(:placeholder-shown) {
  border-color: #dc3545;
}

/* Hover effects */
.card-glass:hover {
  transform: translateY(-5px);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
}

/* Mobile optimization */
@media (max-width: 768px) {
  .card-body {
    padding: 2rem !important;
  }
  
  .fa-4x {
    font-size: 3rem !important;
  }
  
  h1 {
    font-size: 2rem !important;
  }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const form = document.getElementById('loginForm');
  const nameInput = document.getElementById('name');
  
  // Auto-focus on name input
  nameInput.focus();
  
  // Form submission with loading
  form.addEventListener('submit', function(e) {
    const name = nameInput.value.trim();
    
    if (name.length < 2) {
      e.preventDefault();
      alert('Name must be at least 2 characters long');
      return;
    }
    
    if (name.length > 50) {
      e.preventDefault();
      alert('Name must be less than 50 characters');
      return;
    }
    
    // Show loading overlay
    showLoading('Launching your rocket...');
  });
  
  // Real-time validation
  nameInput.addEventListener('input', function() {
    this.value = this.value.replace(/[^a-zA-Z0-9\s]/g, '');
  });
  
  // Enter key handling
  nameInput.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      form.submit();
    }
  });
});

function showLoading(text) {
  const overlay = document.getElementById('loadingOverlay');
  const loadingText = document.getElementById('loadingText');
  
  if (loadingText) {
    loadingText.textContent = text;
  }
  
  if (overlay) {
    overlay.classList.add('show');
  }
}
</script>
